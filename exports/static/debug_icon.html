<!DOCTYPE html>
<html>

<head>
    <title>Icon Debug</title>
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <style>
        body {
            background: white;
        }

        .container {
            margin: 20px;
            border: 1px solid #ccc;
            padding: 10px;
        }
    </style>
</head>

<body>
    <h1>Icon Debug</h1>

    <div class="container">
        <h3>1. Standard Image Tag</h3>
        <img id="test-img" src="/static/icons/fortigate_series_r22_2025q2.svg" height="100" />
    </div>

    <div class="container">
        <h3>2. Three.js Texture Test</h3>
        <div id="canvas-container"></div>
        <div id="log"></div>
    </div>

    <script>
        const log = document.getElementById('log');
        function logMsg(msg) {
            log.innerHTML += msg + "<br>";
            console.log(msg);
        }

        try {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(200, 200);
            renderer.setClearColor(0xeeeeee);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            const url = "/static/icons/fortigate_series_r22_2025q2.svg";
            logMsg("Loading texture from: " + url);

            const loader = new THREE.TextureLoader();
            loader.load(
                url,
                function (texture) {
                    logMsg("Texture loaded successfully!");
                    logMsg("Image size: " + texture.image.width + "x" + texture.image.height);

                    const material = new THREE.SpriteMaterial({ map: texture, color: 0xffffff });
                    const sprite = new THREE.Sprite(material);
                    scene.add(sprite);

                    camera.position.z = 2;
                    renderer.render(scene, camera);
                },
                undefined,
                function (err) {
                    logMsg("Error loading texture: " + JSON.stringify(err));
                }
            );

        } catch (e) {
            logMsg("Critical error: " + e.message);
        }
    </script>
</body>

</html>